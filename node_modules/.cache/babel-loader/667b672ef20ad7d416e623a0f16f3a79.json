{"ast":null,"code":"var _jsxFileName = \"/home/o/reac/src/components/App.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Main from './Main';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport profileImg from '../images/load.gif'; // переменная должна быть в camelCase\n\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [currentUser, setCurrentUser] = React.useState({\n    name: 'Загрузка...',\n    about: 'Загрузка...',\n    avatar: profileImg\n  });\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState({\n    name: '',\n    img: ''\n  });\n  React.useEffect(() => {\n    Promise.all([api.getCardsFromServer(), api.getUserInfo()]).then(values => {\n      /* А тут можно сделать деструктуризацию??? */\n      setCards(values[0]);\n      setCurrentUser(values[1]);\n    }).catch(err => {\n      console.log('1 Ошибка ===> ', err);\n    });\n  }, []);\n\n  function handleCardLikeDislike(card) {\n    const isLiked = card.likes.some(i => {\n      return i._id === currentUser._id;\n    });\n    let method; // не понимаю, как это еще можно сократить\n\n    if (isLiked) {\n      method = \"DELETE\";\n    } else {\n      method = 'PUT';\n    }\n\n    api.changeLikeCardStatus(card.id, method).then(newCard => {\n      setCards(cards => cards.map(c => c._id === card.id ? newCard : c));\n    }).catch(err => {\n      console.log('3 Ошибка ===> ', err);\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.delCard(card.id).then(newCard => {\n      const newArrCards = cards.filter(c => c._id !== card.id);\n      setCards(newArrCards);\n    }).catch(err => {\n      console.log('5 Ошибка ===> ', err);\n    });\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true);\n  }\n\n  function handleCardClick(props) {\n    setSelectedCard({\n      name: props.name,\n      img: props.img\n    });\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setSelectedCard({\n      name: '',\n      img: ''\n    });\n  }\n\n  function handleAddPlaceSubmit(e) {\n    api.loadNewCard({\n      name: e.place,\n      link: e.linkPlace\n    }).then(res => {\n      setCards([res, ...cards]);\n      closeAllPopups();\n    }).catch(err => {\n      console.log('6 Ошибка ===> ', err);\n    });\n  }\n\n  function handleUpdaterUser(e) {\n    api.loadProfile(e).then(res => {\n      setCurrentUser(res);\n      closeAllPopups();\n    }).catch(err => {\n      console.log('7 Ошибка ===> ', err);\n    });\n  }\n\n  function handleUpdateAvatar(e) {\n    api.changeAvatar(e).then(res => {\n      setCurrentUser(res);\n      closeAllPopups();\n    }).catch(err => {\n      console.log('8 Ошибка ===> ', err);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(CurrentUserContext.Provider, {\n    value: currentUser,\n    children: [/*#__PURE__*/_jsxDEV(Main, {\n      cards: cards,\n      onEditAvatar: handleEditAvatarClick,\n      onEditProfile: handleEditProfileClick,\n      onAddPlace: handleAddPlaceClick,\n      onCardClick: handleCardClick,\n      onCardLike: handleCardLikeDislike,\n      onCardDelete: handleCardDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditAvatarPopup, {\n      onUpdateAvarar: handleUpdateAvatar,\n      isOpen: isEditAvatarPopupOpen,\n      onClose: closeAllPopups\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditProfilePopup, {\n      onUpdateUser: handleUpdaterUser,\n      isOpen: isEditProfilePopupOpen,\n      onClose: closeAllPopups\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddPlacePopup, {\n      onAddNewPlace: handleAddPlaceSubmit,\n      isOpen: isAddPlacePopupOpen,\n      onClose: closeAllPopups\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ImagePopup, {\n      card: selectedCard,\n      onClose: closeAllPopups\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"c3IgEveTQmMKzlrUMtXChDCUE6E=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/o/reac/src/components/App.js"],"names":["React","Main","ImagePopup","api","profileImg","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","currentUser","setCurrentUser","useState","name","about","avatar","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","cards","setCards","selectedCard","setSelectedCard","img","useEffect","Promise","all","getCardsFromServer","getUserInfo","then","values","catch","err","console","log","handleCardLikeDislike","card","isLiked","likes","some","i","_id","method","changeLikeCardStatus","id","newCard","map","c","handleCardDelete","delCard","newArrCards","filter","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","props","closeAllPopups","handleAddPlaceSubmit","e","loadNewCard","place","link","linkPlace","res","handleUpdaterUser","loadProfile","handleUpdateAvatar","changeAvatar"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Main from './Main'\nimport ImagePopup from './ImagePopup'\nimport api from '../utils/api'\nimport profileImg from '../images/load.gif' // переменная должна быть в camelCase\nimport CurrentUserContext from '../contexts/CurrentUserContext'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\n\n\nfunction App() {\n  const [currentUser, setCurrentUser] = React.useState({\n    name: 'Загрузка...',\n    about: 'Загрузка...',\n    avatar: profileImg\n  })\n\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false)\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false)\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false)\n\n  const [cards, setCards] = React.useState([])\n\n  const [selectedCard, setSelectedCard] = React.useState({\n    name: '',\n    img:  '',\n  })\n\n  React.useEffect( () => {\n    Promise.all([\n      api.getCardsFromServer(),\n      api.getUserInfo()\n    ])\n    .then( (values) => { /* А тут можно сделать деструктуризацию??? */\n      setCards(values[0])\n      setCurrentUser(values[1])\n    })\n    .catch(\n      (err) => {\n        console.log('1 Ошибка ===> ', err)\n      }\n    )\n  }, [])\n\n  function handleCardLikeDislike(card) {\n    const isLiked = card.likes.some( (i) => {\n      return i._id === currentUser._id\n    })\n    let method // не понимаю, как это еще можно сократить\n    if (isLiked) {\n      method = \"DELETE\"\n    } else {\n      method = 'PUT'\n    }\n    api.changeLikeCardStatus(card.id, method).then( (newCard) => {\n      setCards( (cards) => cards.map( (c) => c._id === card.id ? newCard : c))\n    }).catch(\n      (err) => {\n        console.log('3 Ошибка ===> ', err)\n      }\n    )\n  }\n\n  function handleCardDelete(card) {\n    api.delCard(card.id).then( (newCard) => {\n      const newArrCards = cards.filter( c => c._id !== card.id )\n      setCards(newArrCards)\n    }).catch(\n      (err) => {\n        console.log('5 Ошибка ===> ', err)\n      }\n    )\n  }\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true)\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true)\n  }\n\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true)\n  }\n\n  function handleCardClick(props) {\n    setSelectedCard({\n      name: props.name,\n      img: props.img,\n    })\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false)\n    setEditProfilePopupOpen(false)\n    setAddPlacePopupOpen(false)\n\n    setSelectedCard({\n      name: '',\n      img: '',\n    })\n  }\n\n  function handleAddPlaceSubmit(e) {\n    api.loadNewCard({\n      name: e.place,\n      link: e.linkPlace\n    }).then( (res) => {\n      setCards( [res, ...cards] )\n      closeAllPopups()\n    }).catch(\n      (err) => {\n        console.log('6 Ошибка ===> ', err)\n      }\n    )\n  }\n\n  function handleUpdaterUser(e) {\n    api.loadProfile(e).then( (res) => {\n      setCurrentUser(res)\n      closeAllPopups()\n    }).catch(\n      (err) => {\n        console.log('7 Ошибка ===> ', err)\n      }\n    )\n  }\n\n  function handleUpdateAvatar(e) {\n    api.changeAvatar(e).then( (res) => {\n      setCurrentUser(res)\n      closeAllPopups()\n    }).catch(\n      (err) => {\n        console.log('8 Ошибка ===> ', err)\n      }\n    )\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Main\n        cards={cards}\n        onEditAvatar={handleEditAvatarClick}\n        onEditProfile={handleEditProfileClick}\n        onAddPlace={handleAddPlaceClick}\n        onCardClick={handleCardClick}\n        onCardLike={handleCardLikeDislike}\n        onCardDelete={handleCardDelete}\n      />\n\n      <EditAvatarPopup\n        onUpdateAvarar={handleUpdateAvatar}\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n      />\n\n      <EditProfilePopup\n        onUpdateUser={handleUpdaterUser}\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n      />\n\n      <AddPlacePopup\n        onAddNewPlace={handleAddPlaceSubmit}\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n      />\n\n      <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n    </CurrentUserContext.Provider>\n  )\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}